if (self.CavalryLogger) { CavalryLogger.start_js(["r9DMx"]); }

__d("MercuryAttachmentType",[],(function a(b,c,d,e,f,g){f.exports={ERROR:"error",FILE:"file",PHOTO:"photo",STICKER:"sticker",SHARE:"share",UNKNOWN:"unknown",VIDEO:"video",ANIMATED_IMAGE:"animated_image",EMOJI_LIKE:"emoji_like",GIFT:"gift",THIRDPARTYSTICKER:"third_party_sticker"};}),null);
__d("MercuryTimePassed",[],(function a(b,c,d,e,f,g){f.exports={TODAY:0,WEEK_AGO:1,MONTH_AGO:2,CURRENT_YEAR:3,OTHER_YEAR:4};}),null);
__d("MercuryTypeaheadConstants",[],(function a(b,c,d,e,f,g){f.exports={COMPOSER_FRIENDS_MAX:4,COMPOSER_FB4C_MAX:4,COMPOSER_NON_FRIENDS_MAX:2,COMPOSER_MORE_NON_FRIENDS_MAX:20,COMPOSER_MESSENGER_ONLY_CONTACT_MAX:4,COMPOSER_SHOW_MORE_LIMIT:2,COMPOSER_THREADS_INITIAL_LIMIT:2,COMPOSER_CHATTAB_MAX:5,COMPOSER_PAGES_MAX:5,COMPOSER_WM_MAX:19,USER_TYPE:"user",PAGE_TYPE:"page",THREAD_TYPE:"thread",HEADER_TYPE:"header",SEARCH_TYPE:"search",FRIEND_TYPE:"friend",NON_FRIEND_TYPE:"non_friend",FB4C_TYPE:"fb4c",MEETING_ROOM_PAGE_TYPE:"meeting_room_page",COMMERCE_PAGE_TYPE:"commerce_page",INTERNAL_BOT_PAGE_TYPE:"internal_bot_page",GAME_TYPE:"game",WORKPLACE_BOT_CATEGORY_TYPE:"WORKPLACE_BOT",VALID_EMAIL:"^([A-Z0-9._\u0025+-]+\u0040((?!facebook\\.com))[A-Z0-9.-]+\\.[A-Z]{2,4}|(([A-Z._\u0025+-]+[A-Z0-9._\u0025+-]*)|([A-Z0-9._\u0025+-]+[A-Z._\u0025+-]+[A-Z0-9._\u0025+-]*))\u0040(?:facebook\\.com))$"};}),null);
__d("StoryAttachmentStyle",[],(function a(b,c,d,e,f,g){f.exports={FALLBACK:"fallback",SHARE:"share",OG_COMPOSER_SIMPLE:"og_composer_simple",SPORTS_MATCHUP:"sports_matchup",SHARE_LARGE_IMAGE:"share_large_image",PHOTO:"photo",COVER_PHOTO:"cover_photo",INSPIRATION_PHOTO:"inspiration_photo",ALBUM:"album",NEW_ALBUM:"new_album",COUPON:"coupon",QUESTION:"question",ANSWER:"answer",OPTION:"option",GALLERY:"gallery",STREAM_PUBLISH:"stream_publish",MUSIC_AGGREGATION:"music_aggregation",ITEM_LIST:"list",HIGH_SCORE:"high_score",SCORE_LEADERBOARD:"score_leaderboard",FRIEND_LIST:"friend_list",POPULAR_OBJECTS:"popular_objects",AVATAR_LIST:"avatar_list",AVATAR:"avatar",AVATAR_WITH_VIDEO:"avatar_with_video",EVENT:"event",CANCELED_EVENT:"canceled_event",MINUTIAE_EVENT:"minutiae_event",EXPERIENCE:"experience",LIFE_EVENT:"life_event",GIFT:"gift",IMAGE_SHARE:"image_share",ANIMATED_IMAGE_SHARE:"animated_image_share",ANIMATED_IMAGE_AUTOPLAY:"animated_image_autoplay",ANIMATED_IMAGE_VIDEO:"animated_image_video",ANIMATED_IMAGE_VIDEO_AUTOPLAY:"animated_image_video_autoplay",NOTE:"note",TOPIC:"topic",TOPIC_FOLLOWING_TOPIC:"topic_following_topic",FILE_UPLOAD:"file_upload",NOTIFICATION_TARGET:"notification_target",UNAVAILABLE:"unavailable",PAGE_RECOMMENDATION:"page_recommendation",PAGE_VIDEO_PLAYLIST:"page_video_playlist",VIDEO:"video",VIDEO_INLINE:"video_inline",VIDEO_AUTOPLAY:"video_autoplay",VIDEO_SHARE:"video_share",VIDEO_SHARE_HIGHLIGHTED:"video_share_highlighted",VIDEO_SHARE_YOUTUBE:"video_share_youtube",VIDEO_DIRECT_RESPONSE:"video_direct_response",VIDEO_DIRECT_RESPONSE_AUTOPLAY:"video_direct_response_autoplay",VIDEO_SHOP:"video_shop",INSPIRATION_VIDEO:"inspiration_video",MULTI_VIDEOS_STITCHED:"multi_videos_stitched",MAP:"map",OG_MAP:"og_map",PRODUCT:"product",EXTERNAL_PRODUCT:"external_product",FITNESS_COURSE:"fitness_course",APPLICATION:"application",STICKER:"sticker",EXTERNAL_OG_PRODUCT:"external_og_product",TRAVEL_LOG:"travel_log",MULTI_SHARE:"multi_share",MULTI_SHARE_NO_END_CARD:"multi_share_no_end_card",MULTI_SHARE_NON_LINK_VIDEO:"multi_share_non_link_video",MULTI_SHARE_SEARCH_END_CARD:"multi_share_search_end_card",MULTI_SHARE_FIXED_TEXT:"multi_share_fixed_text",YEAR_IN_REVIEW:"year_in_review",AVATAR_LARGE_COVER:"avatar_large_cover",COMMERCE_PRODUCT_ITEM:"commerce_product_item",COMMERCE_STORE:"commerce_store",THIRD_PARTY_PHOTO:"third_party_photo",PROMPT:"prompt",BIRTHDAY:"birthday",BIRTHDAY_PERCEPTICONS:"birthday_percepticons",DISCUSSION_CONVERSATION:"discussion_conversation",DISCUSSION_COMMENT:"discussion_comment",GROUP_SELL_PRODUCT_ITEM:"group_sell_product_item",GROUP_SELL_PRODUCT_ITEM_MARK_AS_SOLD:"group_sell_mark_as_sold",GAMETIME:"gametime",GAMETIME_LEAGUE:"gametime_league",GAMETIME_PLAY:"gametime_play",GROUP_REPORTED_POST_QUEUE:"group_reported_post_queue",GROUP_PENDING_POST_QUEUE:"group_pending_post_queue",GROUP_JOIN_REQUEST_QUEUE:"group_join_request_queue",GREETING_CARD:"greeting_card",LEAD_GEN:"lead_gen",ATTACHED_STORY:"attached_story",POST_CHANNEL:"post_channel",TEXT_FOR_COLLAGE:"text_for_collage",SOUVENIR:"souvenir",SLIDESHOW:"slideshow",ORION:"orion",ORION_REQUEST:"orion_request",P2P_PAYMENT:"p2p_payment",INSTANT_ARTICLE:"instant_article",MOMENTS_APP_INVITATION:"moments_app_invitation",MOMENTS_APP_PHOTO_REQUEST:"moments_app_photo_request",RIDE_ORDERED:"ride_ordered",RIDE_RECEIPT:"ride_receipt",BUSINESS_MESSAGE_ITEMS:"business_message_items",RETAIL_CANCELLATION:"retail_cancellation",RETAIL_PROMOTION:"retail_promotion",RETAIL_ITEM:"retail_item",RETAIL_NOW_IN_STOCK:"retail_now_in_stock",RETAIL_RECEIPT:"retail_receipt",RETAIL_SHIPMENT:"retail_shipment",RETAIL_SHIPMENT_FOR_SUPPORTED_CARRIER:"retail_shipment_for_supported_carrier",RETAIL_SHIPMENT_FOR_UNSUPPORTED_CARRIER:"retail_shipment_for_unsupported_carrier",RETAIL_SHIPMENT_TRACKING_EVENT:"retail_shipment_tracking_event",RETAIL_SHIPMENT_TRACKING_EVENT_ETA:"retail_shipment_tracking_event_eta",RETAIL_SHIPMENT_TRACKING_EVENT_IN_TRANSIT:"retail_shipment_tracking_event_in_transit",RETAIL_SHIPMENT_TRACKING_EVENT_OUT_FOR_DELIVERY:"retail_shipment_tracking_event_out_for_delivery",RETAIL_SHIPMENT_TRACKING_EVENT_DELAYED:"retail_shipment_tracking_event_delayed",RETAIL_SHIPMENT_TRACKING_EVENT_DELIVERED:"retail_shipment_tracking_event_delivered",SURVEY:"survey",MESSAGE_LOCATION:"message_location",JOB_OFFER:"job_offer",GROUP_ADD_MEMBERS:"group_add_memebers",GROUP_MEMBER_ADDED:"group_member_added",RTC_CALL_LOG:"rtc_call_log",EVENTS_PENDING_POST_QUEUE:"events_pending_post_queue",EVENT_CALENDAR:"event_calendar",FACEPILE:"facepile",ATTRIBUTED_SHARE:"attributed_share",VIDEO_CINEMAGRAPH:"video_cinemagraph",LOCAL_CONTEXT_SHARE:"local_context_share",H_SCROLL:"h_scroll",EGO_HSCROLL:"ego_hscroll",MEDIA_QUESTION:"media_question",RICH_MEDIA:"rich_media",RICH_MEDIA_COLLECTION:"rich_media_collection",SQUARE_IMAGE_SHARE:"square_image_share",RETAIL_AGENT_ITEM_SUGGESTION:"retail_agent_item_suggestion",RETAIL_AGENT_ITEM_RECEIPT:"retail_agent_item_receipt",NOTE_COMPOSED:"note_composed",AVATAR_WITH_BIRTHDAY:"avatar_with_birthday",AIRLINE_FLIGHT_RESCHEDULE_UPDATE_BUBBLE:"airline_flight_reschedule_update_bubble",AIRLINE_CONFIRMATION:"airline_confirmation",AIRLINE_CHECK_IN:"airline_check_in",AIRLINE_BOARDING_PASS:"airline_boarding_pass",AIRLINE_FLIGHT_RESCHEDULE_UPDATE:"airline_flight_reschedule_update",LIGHTBOX_VIDEO:"lightbox_video",GLOBALLY_DELETED_MESSAGE_PLACEHOLDER:"globally_deleted_message_placeholder",GENIE_MESSAGE:"genie_message",MOVIE_BOT_MOVIE_LIST:"movie_bot_movie_list",MOVIE_BOT_MOVIE_SHOWTIME_LIST:"movie_bot_movie_showtime_list",AVATAR_WITH_EGO_ACTION:"avatar_with_ego_action",EVENT_TICKET_DEPRECATED:"event_ticket",VERTICAL_ATTACHMENT_LIST:"vertical_attachment_list",INSTANT_ARTICLE_LEGACY:"instant_article_legacy",FUNDRAISER_PAGE:"fundraiser_page",FINANCIAL_BILL_PAYMENT_REQUEST:"financial_bill_payment_request",GOODWILL_THROWBACK_FRIENDVERSARY_POLAROIDS_CARD:"goodwill_throwback_friendversary_polaroids_card",WELCOME_CARD_IMAGE:"welcome_card_image",LARGE_IMAGE_LIKE:"large_image_like",ASK_FRIENDS:"ask_friends",CULTURAL_MOMENT:"cultural_moment",TELEPHONE_CALL_LOG:"telephone_call_log",SUPER_EMOJI:"super_emoji",BOOK:"book",SUBTOPIC_CUSTOMIZATION_QUESTION:"subtopic_customization_question",SUBTOPIC_CUSTOMIZATION_OPTION:"subtopic_customization_option",RESTAURANT:"restaurant",CONNECTION_QUESTION:"connection_question",CONNECTION_QUESTION_OPTION:"connection_question_option",PYMI_ITEM:"pymi_item",GOODWILL_THROWBACK_FRIENDVERSARY_COLLAGE_CARD:"goodwill_throwback_friendversary_collage_card",CITY:"city",AVATAR_WITH_SHARE:"avatar_with_share",LIGHTWEIGHT_PLACE:"lightweight_place",QUOTED_SHARE:"quoted_share",SMS_LOG:"sms_log",CENTERED_TEXT:"centered_text",GOODWILL_THROWBACK_FRIENDVERSARY_DATA_CARD:"goodwill_throwback_friendversary_data_card",GOODWILL_THROWBACK_FACEVERSARY_COLLAGE_CARD:"goodwill_throwback_faceversary_collage_card",GOODWILL_THROWBACK_ANNIVERSARY_COLLAGE_CARD:"goodwill_throwback_anniversary_collage_card",MESSAGE_EVENT:"message_event",MESSAGE_THREAD:"message_thread",QUOTE:"quote",VOTER_REGISTRATION_SHARE:"voter_registration_share",AIRLINE_ITINERARY:"airline_itinerary",AIRLINE_UPDATE:"airline_update",PLACE_LIST:"place_list",IMPLICIT_PLACE_LIST_CONVERSION:"implicit_place_list_conversion",AIRLINE_CHECKIN_REMINDER:"airline_checkin_reminder",MINUTIAE_UNIT:"minutiae_unit",INSTANT_ARTICLE_PHOTO:"instant_article_photo",INSTANT_ARTICLE_VIDEO:"instant_article_video",PHOTO_LINK_SHARE:"photo_link_share",BUSINESS_LOCATION:"business_location",GOODWILL_WEATHER:"goodwill_weather",CULTURAL_MOMENT_HOLIDAY_CARD:"cultural_moment_holiday_card",TRANSACTION_INVOICE:"transaction_invoice",GROUP:"group",COMMENT_PLACE_INFO:"comment_place_info",GOODWILL_THROWBACK_FRIENDVERSARY_POLAROIDS_CARD_IPB:"goodwill_throwback_friendversary_polaroids_card_ipb",GOODWILL_THROWBACK_FRIENDVERSARY_COLLAGE_CARD_IPB:"goodwill_throwback_friendversary_collage_card_ipb",FUNDRAISER_PERSON_TO_CHARITY:"fundraiser_person_to_charity",FUNDRAISER_PERSON_FOR_PERSON:"fundraiser_person_for_person",FUNDRAISER_FOR_STORY:"fundraiser_for_story",MESSAGE_LIVE_LOCATION:"message_live_location",MESSENGER_INVITE:"messenger_invite",GAMES_INSTANT_PLAY:"games_instant_play",PROFILE_MEDIA:"profile_media",NATIVE_TEMPLATES:"native_templates",GOODWILL_THROWBACK_VIDEO_BASIC:"goodwill_throwback_video_basic",COMMERCE_PRODUCT_MINI:"commerce_product_mini",COMMERCE_PRODUCT_MINI_LIST:"commerce_product_mini_list",COMMENT:"comment",MESSENGER_TEAM_BOT_SHARE:"messenger_team_bot_share",LIVE_VIDEO_SCHEDULE:"live_video_schedule",PRODUCT_ITEM:"product_item",PLATFORM_INSTANT_APP:"platform_instant_app",YEAR_OVERVIEW:"year_overview",NATIVE_COMPONENT_FLOW_BOOKING_REQUEST:"native_component_flow_booking_request",FRIEND_REQUEST:"friend_request",MESSENGER_GROUP_JOINABLE_LINK:"messenger_group_joinable_link",SOCIAL_SEARCH_CONVERSION_PROMPT:"social_search_conversion_prompt",MDOTME_USER_LINK:"mdotme_user_link",DYNAMIC_MULTI_SHARE_ITEMS:"dynamic_multi_share_items",EVENT_REMINDER:"event_reminder",INSTANT_GAMES_SHARE_MESSAGE:"instant_games_share_message",MESSENGER_PLATFORM_COMPACT_ITEM:"messenger_platform_compact_item",MESSENGER_PLATFORM_COVER_ITEM:"messenger_platform_cover_item",MULTI_SHARE_NON_LINK_VIDEO_AUTO_SCROLL:"multi_share_non_link_video_auto_scroll",ENDORSEMENT:"endorsement",OFFER_VIEW_LIVE_COUNTDOWN:"offer_view_live_countdown",ENHANCED_LINK_REDDIT_POST:"enhanced_link_reddit_post",MESSENGER_COMMERCE_COVER_ITEM:"messenger_commerce_cover_item",ENHANCED_LINK_YELP_BUSINESS:"enhanced_link_yelp_business",PAGES_PLATFORM_LEAD_GEN:"pages_platform_lead_gen",NATIVE_STORY:"native_story",MFS_BILL_PAY_CREATION_UPDATE:"mfs_bill_pay_creation_update",MFS_BILL_PAY_REFERENCE_CODE_UPDATE:"mfs_bill_pay_reference_code_update",MFS_BILL_PAY_AGENT_CASH_IN_UPDATE:"mfs_bill_pay_agent_cash_in_update",ISSUE_POSITION:"issue_position",PAGES_PLATFORM_BOOKING_MESSAGE:"pages_platform_booking_message",EXTERNAL_GALLERY:"external_gallery",MEME_SHARE:"meme_share",MESSENGER_PLATFORM_ELEMENT:"messenger_platform_element",INSTANT_GAMES_SHARE_SCORE_MESSAGE:"instant_games_share_score_message",MESSENGER_PLATFORM_BUTTON_LIST:"messenger_platform_button_list",BALLOT:"ballot",LIGHTWEIGHT_ACTION:"lightweight_action",TAROT_DIGEST:"tarot_digest",EVENT_TOUR:"event_tour",ADAPTIVE_MEDIA:"adaptive_media",DYNAMIC_GAME_BOARD:"dynamic_game_board",PAYMENT_PLATFORM:"payment_platform",OMNI_M_FLOW:"omni_m_flow",GROUP_QUIZ:"group_quiz",TRIAL_AD:"trial_ad",TEEM_COLLECTIONS:"teem_collections",CRISIS_STATUS:"crisis_status",CRISIS_LISTING:"crisis_listing",VR_CONTENT:"vr_content",VIDEO_RECOMMENDATION_HSCROLL:"video_recommendation_hscroll",VIDEO_TRAILER:"video_trailer",SHOW_PAGE_SHARE:"show_page_share",MFS_ATTACHMENT:"mfs_attachment",GROUP_TASK:"group_task",VIDEO_RECOMMENDATION_SINGLETON:"video_recommendation_singleton",PAGE_REVIEW_PROMPT:"page_review_prompt",VIDEO_SHOW:"video_show",UNCONNECTED_VIDEO:"unconnected_video",SHOW_SHARE:"show_share",JOB_SEARCH_JOB_APPLICATION:"job_search_job_application",PAGE_MESSENGER_ATTACHMENT:"page_messenger_attachment",CONTACT_YOUR_REP:"contact_your_rep",LOCATION_EXTENSION:"location_extension",PLACE_RECOMMENDATION:"place_recommendation",JOB_SEARCH_JOB_OPENING:"job_search_job_opening",PAGE_MESSAGE_ONLINE_INDICATOR:"page_message_online_indicator",LOCAL_PIVOT:"local_pivot",ORION_REQUEST_NEW:"orion_request_new",PHOTO_WITH_SHIELD:"photo_with_shield",PLAYABLE_AD:"playable_ad",FUN_FACT_PROMPT:"fun_fact_prompt",FATIGUED_SHARE:"fatigued_share",DISCUSSION_QUESTION:"discussion_question",PARTIES_INVITE:"parties_invite",PROFILE_INTRO_CARD_BIO:"profile_intro_card_bio",PAGES_SHARE:"pages_share",PRODUCT_RECOMMENDATION_LIST:"product_recommendation_list",VISUAL_POLL:"visual_poll",MULTI_PLACE_RECOMMENDATION:"multi_place_recommendation"};}),null);
__d('Dock',['csx','Event','shield','Arbiter','ArbiterMixin','BlueBar','ChatQuietLinks','CSS','DataStore','DOM','Parent','Scroll','Style','Toggler','Vector','emptyFunction'],(function a(b,c,d,e,f,g,h){function i(){}Object.assign(i,c('ArbiterMixin'),{MIN_HEIGHT:140,INITIAL_FLYOUT_HEIGHT_OFFSET:10,init:function j(k){this.init=c('emptyFunction');this.rootEl=k;this.calculateViewportDimensions();c('ChatQuietLinks').removeEmptyHrefs(this.rootEl);c('Event').listen(k,'click',this._onClick.bind(this));c('Event').listen(window,'resize',this._onWindowResize.bind(this));c('Toggler').subscribe(['show','hide'],function(l,m){var n=m.getActive();if(!c('DOM').contains(k,n))return;if(c('CSS').hasClass(n,'fbNub')){this.notifyNub(n,l);if(l==='show')this._resizeNubFlyout(n);}else{var o=c('Parent').byClass(n,'fbNubFlyout');if(o)c('CSS').conditionClass(o,'menuOpened',l==='show');}}.bind(this));this.inform('init',{},c('Arbiter').BEHAVIOR_PERSISTENT);},calculateViewportDimensions:function j(){return this.viewportDimensions=c('Vector').getViewportDimensions();},getFlyoutHeightOffset:function j(){if(this.flyoutHeightOffset)return this.flyoutHeightOffset;this.flyoutHeightOffset=this.INITIAL_FLYOUT_HEIGHT_OFFSET+c('Vector').getElementDimensions(this.rootEl).y;var k=c('BlueBar').getBar();if(k){var l=c('Style').isFixed(k)?'viewport':'document';this.flyoutHeightOffset+=c('Vector').getElementPosition(k,l).y+c('Vector').getElementDimensions(k).y;}return this.flyoutHeightOffset;},toggle:function j(k){var l=this._findFlyout(k);if(!l)return;this.subscribe('init',function(){c('Toggler').toggle(k);});},show:function j(k){this.subscribe('init',function(){c('Toggler').show(k);});},showNub:function j(k){c('CSS').show(k);},hide:function j(k){this.subscribe('init',function(){var l=c('Toggler').getInstance(k);c('DOM').contains(k,l.getActive())&&l.hide();});},hideNub:function j(k){c('CSS').hide(k);this.hide(k);},setUseMaxHeight:function j(k,l){c('CSS').conditionClass(k,'maxHeight',l!==false);this._resizeNubFlyout(k);},_resizeNubFlyout:function j(k){var l=this._findFlyout(k);if(!l||c('CSS').hasClass(k,'placeholder')||!(c('CSS').hasClass(k,'openToggler')||c('CSS').hasClass(k,'opened')))return;var m=c('DOM').find(l,'div.fbNubFlyoutOuter'),n=c('DOM').find(m,'div.fbNubFlyoutInner'),o=c('DOM').find(n,'div.fbNubFlyoutBody'),p=c('Scroll').getTop(o),q=o.offsetHeight;c('Style').set(o,'height','auto');var r=c('Vector').getElementDimensions(l),s=c('Vector').getElementDimensions(o),t=this.getMaxFlyoutHeight(k);c('Style').set(l,'max-height',t+'px');c('Style').set(m,'max-height',t+'px');r=c('Vector').getElementDimensions(l);var u=c('Vector').getElementDimensions(n),v=u.y-s.y,w=r.y-v,x=parseInt(o.style.height||o.clientHeight,10),y=w!==x;if(r.y>v&&y)c('Style').set(o,'height',w+'px');c('CSS').removeClass(l,'swapDirection');var z=c('Vector').getElementPosition(l).x;c('CSS').conditionClass(l,'swapDirection',function(){if(z<0)return true;if(!r||!this.viewportDimensions)return false;return z+r.x>this.viewportDimensions.x;}.bind(this)());if(y&&p+q>=s.y){c('Scroll').setTop(o,o.scrollHeight);}else c('Scroll').setTop(o,p);this.notifyNub(k,'resize');},getMaxFlyoutHeight:function j(k){var l=this._findFlyout(k),m=c('Vector').getElementPosition(l,'viewport'),n=c('Vector').getElementDimensions(l);if(!this.viewportDimensions||!m)return 0;var o=Math.max(this.MIN_HEIGHT,this.viewportDimensions.y-this.getFlyoutHeightOffset())-(this.viewportDimensions.y-m.y-n.y);return Math.max(o,0);},resizeAllFlyouts:function j(){var k=this._getAllNubs(),l=k.length;while(l--)this._resizeNubFlyout(k[l]);},hideAllFlyouts:function j(){var k=this._getAllNubs(),l=k.length;while(l--)this.hide(k[l]);},_getAllNubs:function j(){var k=c('DOM').scry(this.rootEl,"div._50-v.openToggler");return k.concat(c('DOM').scry(this.rootEl,"div._50-v.opened"));},_onClick:function j(event){var k=event.getTarget(),l=c('Parent').byClass(k,'fbNub');if(l){if(c('Parent').byClass(k,'fbNubFlyoutTitlebar')){var m=c('Parent').byTag(k,'a'),n=k.nodeName=='INPUT'&&k.getAttribute('type')=='submit';if(!m&&!n){this.hide(l);return false;}}this.notifyNub(l,'click');}},_onWindowResize:function j(event){this.calculateViewportDimensions();this.resizeAllFlyouts();},_findFlyout:function j(k){return c('CSS').hasClass(k,'fbNubFlyout')?k:c('DOM').scry(k,'div.fbNubFlyout')[0]||null;},registerNubController:function j(k,l){c('DataStore').set(k,'dock:nub:controller',l);l.subscribe('nub/button/content-changed',c('shield')(this.inform,this,'resize',k));l.subscribe('nub/flyout/content-changed',c('shield')(this._resizeNubFlyout,this,k));},unregisterNubController:function j(k){c('DataStore').remove(k,'dock:nub:controller');},notifyNub:function j(k,l,m){var n=c('DataStore').get(k,'dock:nub:controller');n&&n.inform(l,m);}});f.exports=b.Dock||i;}),null);
__d('DockTabsViewportFantaTabUtils',[],(function a(b,c,d,e,f,g){'use strict';var h=269;function i(){return h+1;}function j(m){return Math.floor(m/h);}function k(m){if(!m)return null;var n=m.fantaTabModelStateGetter;return n?n():null;}function l(m){return m?m.size:0;}f.exports={getTabCountToFitWidth:j,getMinRequiredWidthForFirstFantaTab:i,getFantaTabModelFromCallbacks:k,getNumFantaTabsFromModel:l};}),null);
__d('DockTabsViewportPinnedConversationTabUtils',[],(function a(b,c,d,e,f,g){'use strict';var h=496+9+2,i=210+9+2,j=52;function k(){return h;}function l(){return i;}function m(){return j;}function n(r){return r.getIsRaised()?k():l();}function o(){return k()+j;}function p(r){var s=r||{},t=s.pinnedConvoTabStateGetter;return t?t():null;}function q(r){return r?r.getTotalTabCount():0;}f.exports={getRaisedPinnedConvoTabWidth:k,getLoweredPinnedConvoTabWidth:l,getPinnedConvoSelectorWidth:m,getPinnedConvoTabWidth:n,getMinRequiredWidthForFirstConvoTab:o,getPinnedConvoTabsStateFromCallbacks:p,getNumPinnedConvoTabsFromModel:q};}),null);
__d('DockTabsViewportCalculator',['csx','Arbiter','DataStore','Dock','DockTabsViewportFantaTabUtils','DockTabsViewportPinnedConversationTabUtils','DOM','Event','FullScreen','PinnedConversationNubsConfig','SubscriptionsHandler','Vector','ViewportBounds','ge','getViewportDimensions','setImmediate'],(function a(b,c,d,e,f,g,h){'use strict';var i=50,j=35,k=j,l='dock-tab-viewport-inst',m=c('DockTabsViewportFantaTabUtils').getMinRequiredWidthForFirstFantaTab,n=c('DockTabsViewportFantaTabUtils').getFantaTabModelFromCallbacks,o=c('DockTabsViewportFantaTabUtils').getNumFantaTabsFromModel,p=c('DockTabsViewportPinnedConversationTabUtils').getMinRequiredWidthForFirstConvoTab,q=c('DockTabsViewportPinnedConversationTabUtils').getNumPinnedConvoTabsFromModel,r=c('DockTabsViewportPinnedConversationTabUtils').getPinnedConvoTabsStateFromCallbacks;function s(u){return u?c('Vector').getElementDimensions(u).x:0;}function t(u){this.$DockTabsViewportCalculatorImpl1=u;this.$DockTabsViewportCalculatorImpl3=0;this.$DockTabsViewportCalculatorImpl4=0;this.$DockTabsViewportCalculatorImpl5=null;this.$DockTabsViewportCalculatorImpl6=null;this.$DockTabsViewportCalculatorImpl7=false;this.$DockTabsViewportCalculatorImpl8=false;this.$DockTabsViewportCalculatorImpl9=false;this.$DockTabsViewportCalculatorImpl2=new (c('SubscriptionsHandler'))();this.$DockTabsViewportCalculatorImpl10();this.$DockTabsViewportCalculatorImpl11();}t.prototype.$DockTabsViewportCalculatorImpl10=function(){var u=this.$DockTabsViewportCalculatorImpl12.bind(this);this.$DockTabsViewportCalculatorImpl2.addSubscriptions(c('Event').listen(window,'resize',u),c('Dock').subscribe('resize',u),c('Arbiter').subscribeOnce('sidebar/initialized',u,c('Arbiter').SUBSCRIBE_NEW),c('FullScreen').subscribe('changed',function(){if(c('FullScreen').isFullScreen()){this.$DockTabsViewportCalculatorImpl7=true;this.$DockTabsViewportCalculatorImpl8=false;}else{this.$DockTabsViewportCalculatorImpl7=false;if(this.$DockTabsViewportCalculatorImpl8){c('setImmediate')(function(){u();});this.$DockTabsViewportCalculatorImpl8=false;}}}.bind(this)));};t.prototype.registerFantaTabCallbacks=function(u){this.$DockTabsViewportCalculatorImpl5=u;};t.prototype.registerPinnedConvoTabCallbacks=function(u){this.$DockTabsViewportCalculatorImpl6=u;};t.prototype.forceRecalculateFBDockWidth=function(){this.$DockTabsViewportCalculatorImpl11();this.$DockTabsViewportCalculatorImpl13({forceRecalculateChatTabs:false,pinnedConvoUpdateData:null});};t.prototype.forceRecalculateChatTabs=function(){this.$DockTabsViewportCalculatorImpl13({forceRecalculateChatTabs:true,pinnedConvoUpdateData:null});};t.prototype.forceRecalculatePinnedConvoTabs=function(u){this.$DockTabsViewportCalculatorImpl13({forceRecalculateChatTabs:true,pinnedConvoUpdateData:u});};t.prototype.$DockTabsViewportCalculatorImpl12=function(){if(c('FullScreen').isFullScreen()||this.$DockTabsViewportCalculatorImpl7){this.$DockTabsViewportCalculatorImpl8=true;return;}this.forceRecalculateFBDockWidth();};t.prototype.$DockTabsViewportCalculatorImpl13=function(u){var v=u.forceRecalculateChatTabs,w=u.pinnedConvoUpdateData,x=this.$DockTabsViewportCalculatorImpl14(),y=x.chatTabAvailableWidth,z=x.pinnedConvoTabAvailableWidth;this.$DockTabsViewportCalculatorImpl15(y,!!v);this.$DockTabsViewportCalculatorImpl16(z,w);};t.prototype.$DockTabsViewportCalculatorImpl16=function(u,v){var w=this.$DockTabsViewportCalculatorImpl6||{},x=w.onAvailableWidthChanged;x&&x(u,v);};t.prototype.$DockTabsViewportCalculatorImpl15=function(u,v){var w=this.$DockTabsViewportCalculatorImpl5||{},x=w.onAvailableWidthChanged;x&&x(u);};t.prototype.$DockTabsViewportCalculatorImpl17=function(){var u=n(this.$DockTabsViewportCalculatorImpl5);return o(u);};t.prototype.$DockTabsViewportCalculatorImpl18=function(){return m();};t.prototype.$DockTabsViewportCalculatorImpl14=function(){var u=this.$DockTabsViewportCalculatorImpl3,v={chatTabAvailableWidth:u,pinnedConvoTabAvailableWidth:0},w={chatTabAvailableWidth:0,pinnedConvoTabAvailableWidth:u},x=this.$DockTabsViewportCalculatorImpl17(),y=r(this.$DockTabsViewportCalculatorImpl6),z=q(y);if(!y||z===0){return v;}else if(x===0)return w;var aa=this.$DockTabsViewportCalculatorImpl18();if(u<=aa)return v;var ba=p(),ca=u-aa,da=0;if(ca<ba){if(c('PinnedConversationNubsConfig').chatTabTypingPriority&&y&&(y.anyTabHasText()||y.anyTabHasFocus())){return w;}else return v;}else da=ba;var ea=da,fa=Math.max(aa,u-da);return {chatTabAvailableWidth:fa,pinnedConvoTabAvailableWidth:ea};};t.prototype.$DockTabsViewportCalculatorImpl11=function(){this.$DockTabsViewportCalculatorImpl3=this.$DockTabsViewportCalculatorImpl19();this.$DockTabsViewportCalculatorImpl20('DockTabsViewportCalculator/recalcTotalDock_FOR_TEST_ONLY');};t.prototype.$DockTabsViewportCalculatorImpl21=function(){var u=this.$DockTabsViewportCalculatorImpl1;if(!u)return {buddyListNubWidth:0,employeeNubsWidth:0};var v=s(u),w=s(c('DOM').find(u,"._56ox")),x=s(c('DOM').scry(u,"._56oy")[0]),y=s(c('DOM').scry(u,"._ph1")[0]),z=Math.max(v-w-x-y,0);return {buddyListNubWidth:w,employeeNubsWidth:z};};t.prototype.$DockTabsViewportCalculatorImpl19=function(){var u=c('getViewportDimensions').withoutScrollbars().width;u-=c('ViewportBounds').getLeft()+c('ViewportBounds').getRight();u-=i;var v=this.$DockTabsViewportCalculatorImpl21(),w=v.buddyListNubWidth,x=v.employeeNubsWidth;u-=w;this.$DockTabsViewportCalculatorImpl4=Math.max(this.$DockTabsViewportCalculatorImpl4,x);u-=this.$DockTabsViewportCalculatorImpl4;u-=k;return Math.max(u,0);};t.prototype.enableTestInforms_FOR_TEST_ONLY=function(){this.$DockTabsViewportCalculatorImpl9=true;};t.prototype.$DockTabsViewportCalculatorImpl20=function(u){if(this.$DockTabsViewportCalculatorImpl9)c('Arbiter').inform(u);};t.prototype.getChatTabAvailableDockWidth_FOR_TEST_ONLY=function(){return this.$DockTabsViewportCalculatorImpl14().chatTabAvailableWidth;};t.prototype.getPinnedConvoTabAvailableDockWidth_FOR_TEST_ONLY=function(){return this.$DockTabsViewportCalculatorImpl14().pinnedConvoTabAvailableWidth;};t.prototype.getAvailableTotalWidth_FOR_TEST_ONLY=function(){return this.$DockTabsViewportCalculatorImpl3;};f.exports={getInstance:function u(v){var w=c('ge')('pagelet_dock');if(!w||!c('DOM').contains(w,v))return null;var x=c('DataStore').get(w,l);if(x instanceof t)return x;var y=c('DOM').scry(w,'.fbDockWrapperRight .fbDock')[0];x=new t(y);c('DataStore').set(w,l,x);return x;}};}),null);
__d('ChatActivity',['Arbiter','Event','JSLogger','MercuryConfig','PresenceState','UserActivity'],(function a(b,c,d,e,f,g){var h=c('MercuryConfig').activity_limit||60000,i=c('MercuryConfig').idle_limit||1800000,j=c('MercuryConfig').idle_poll_interval||300000,k=c('JSLogger').create('chat_activity'),l=Date.now(),m=true;function n(){var r=Date.now();return !!(m&&r-l<h);}var o=Object.assign(new (c('Arbiter'))(),{isActive:n});function p(){var r=l;l=Date.now();if(l-r>i){k.debug('idle_to_active',r);c('PresenceState').doSync();}o.inform('activity');}c('Event').listen(window,'focus',function(){m=true;p();});c('Event').listen(window,'blur',function(){m=false;});c('UserActivity').subscribe(function(){p();});function q(r){var s=r&&r.at&&c('PresenceState').verifyNumber(r.at);if(typeof s!=='number')s=null;return s||0;}setInterval(function(){var r=Date.now(),s=q(c('PresenceState').get()),t=Math.max(l,s);if(r-t>i){k.debug('idle',{cookie:s,local:l});o.inform('idle',r-t);}},j);c('PresenceState').registerStateStorer(function(r){var s=q(r);if(s<l)r.at=l;return r;});c('Arbiter').subscribe(c('JSLogger').DUMP_EVENT,function(r,s){s.chat_activity={activity_limit:h,idle_limit:i,idle_poll_interval:j,last_active_time:l};});f.exports=o;}),null);
__d('MercuryAssert',['MercuryIDs'],(function a(b,c,d,e,f,g){f.exports={isParticipantID:function h(i){if(!c('MercuryIDs').isValid(i))throw new Error('bad_participant_id '+i);},allParticipantIDs:function h(i){i.forEach(this.isParticipantID);},isUserParticipantID:function h(i){var j=c('MercuryIDs').tokenize(i);if(j.type!='fbid')throw new Error('bad_user_id '+i);},isEmailParticipantID:function h(i){var j=c('MercuryIDs').tokenize(i);if(j.type!='email')throw new Error('bad_email_id '+i);},allThreadID:function h(i){i.forEach(this.isThreadID);},isThreadID:function h(i){if(!c('MercuryIDs').isValid(i))throw new Error('bad_thread_id '+i);}};}),null);
__d('MercurySingletonProvider',['CurrentUser'],(function a(b,c,d,e,f,g){'use strict';function h(i){this.$MercurySingletonProvider1={};this.$MercurySingletonProvider2=i;}h.prototype.getForFBID=function(i){if(!this.$MercurySingletonProvider1[i])this.$MercurySingletonProvider1[i]=new this.$MercurySingletonProvider2(i);return this.$MercurySingletonProvider1[i];};h.prototype.get=function(){return this.getForFBID(c('CurrentUser').getID());};h.mock=function(i){throw new Error('MercurySingletonProvider.mock() must only be used in tests.');};f.exports=h;}),null);
__d('MercuryThreadInformer',['ArbiterMixin','LogHistory','MercuryAssert','MercurySingletonProvider','mapObject','mixin'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('LogHistory').getInstance('mercury_informer');h=babelHelpers.inherits(k,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;k.get=function(){return l.get();};k.getForFBID=function(m){return l.getForFBID(m);};function k(m){i.constructor.call(this);this.$MercuryThreadInformer1=m;this.$MercuryThreadInformer2={};this.$MercuryThreadInformer3={};this.$MercuryThreadInformer4={};this.$MercuryThreadInformer5={};this.$MercuryThreadInformer6=false;this.$MercuryThreadInformer7=false;this.$MercuryThreadInformer8=false;this.$MercuryThreadInformer9={};this.$MercuryThreadInformer10={};this.$MercuryThreadInformer11={};this.$MercuryThreadInformer12=0;}k.prototype.updatedThread=function(m){this.$MercuryThreadInformer3[m]=true;this.$MercuryThreadInformer13();};k.prototype.invalidatedThread=function(m){this.$MercuryThreadInformer4[m]=true;this.$MercuryThreadInformer13();};k.prototype.deletedThread=function(m){this.$MercuryThreadInformer2[m]=true;this.$MercuryThreadInformer13();};k.prototype.updatedThreadlist=function(){this.$MercuryThreadInformer6=true;this.$MercuryThreadInformer13();};k.prototype.updatedUnseenState=function(){this.$MercuryThreadInformer7=true;this.$MercuryThreadInformer13();};k.prototype.updatedUnreadState=function(){this.$MercuryThreadInformer8=true;this.$MercuryThreadInformer13();};k.prototype.changedThreadReadState=function(m,n,o){if(!this.$MercuryThreadInformer5[m]||this.$MercuryThreadInformer5[m].timestamp<o)this.$MercuryThreadInformer5[m]={mark_as_read:n,timestamp:o};this.$MercuryThreadInformer13();};k.prototype.receivedMessage=function(m){c('MercuryAssert').isThreadID(m.thread_id);var n=m.thread_id;if(!this.$MercuryThreadInformer9[n])this.$MercuryThreadInformer9[n]=[];this.$MercuryThreadInformer9[n].push(m);this.updatedThread(n);};k.prototype.reorderedMessages=function(m,n){this.$MercuryThreadInformer10[m]={source:n};this.$MercuryThreadInformer13();};k.prototype.updatedMessage=function(m,n,o){if(!this.$MercuryThreadInformer11[m])this.$MercuryThreadInformer11[m]={};this.$MercuryThreadInformer11[m][n]={source:o};this.updatedThread(m);};k.prototype.synchronizeInforms=function(m){this.$MercuryThreadInformer12++;try{m();}catch(n){throw n;}finally{this.$MercuryThreadInformer12--;this.$MercuryThreadInformer13();}};k.prototype.listen=function(m,n){return this.subscribe('threads-updated',function(o,p){if(p[m])n(m);});};k.prototype.$MercuryThreadInformer13=function(){if(!this.$MercuryThreadInformer12){var m=this.$MercuryThreadInformer2,n=this.$MercuryThreadInformer3,o=this.$MercuryThreadInformer4,p=this.$MercuryThreadInformer5,q=this.$MercuryThreadInformer6,r=this.$MercuryThreadInformer7,s=this.$MercuryThreadInformer8,t=this.$MercuryThreadInformer9,u=this.$MercuryThreadInformer10,v=this.$MercuryThreadInformer11;this.$MercuryThreadInformer2={};this.$MercuryThreadInformer3={};this.$MercuryThreadInformer4={};this.$MercuryThreadInformer5={};this.$MercuryThreadInformer6=false;this.$MercuryThreadInformer7=false;this.$MercuryThreadInformer8=false;this.$MercuryThreadInformer9={};this.$MercuryThreadInformer10={};this.$MercuryThreadInformer11={};var w=Object.keys(n);if(w.length||q)this.inform('threadlist-updated',w);if(w.length)this.$MercuryThreadInformer14('threads-updated',n);for(var x in o){this.$MercuryThreadInformer14('thread-invalidated',o);break;}for(var x in p){this.$MercuryThreadInformer14('thread-read-changed',p);break;}for(x in m){this.$MercuryThreadInformer14('threads-deleted',m);break;}if(r)this.$MercuryThreadInformer14('unseen-updated',null);if(s)this.$MercuryThreadInformer14('unread-updated',null);for(x in t){this.$MercuryThreadInformer14('messages-received',t);break;}for(x in u){this.$MercuryThreadInformer14('messages-reordered',u);break;}for(x in v){this.$MercuryThreadInformer14('messages-updated',v);break;}}};k.prototype.$MercuryThreadInformer14=function(m,n){if(m==='threads-updated')j.debug(m,JSON.stringify(n));this.inform(m,n);};var l=new (c('MercurySingletonProvider'))(k);f.exports=k;}),null);
__d('MercuryViewer',['CurrentUser','MercuryAssert'],(function a(b,c,d,e,f,g){'use strict';var h='fbid:'+c('CurrentUser').getID(),i={getID:function j(){return h;},isViewer:function j(k){c('MercuryAssert').isParticipantID(k);return k===h;}};f.exports=i;}),null);
__d('MercuryTimestampTracker',['MercuryActionType','MercuryDispatcher','MercuryPayloadSource','MercurySingletonProvider'],(function a(b,c,d,e,f,g){'use strict';h.getForFBID=function(j){return i.getForFBID(j);};h.get=function(){return i.get();};function h(j){this.$MercuryTimestampTracker1=j;this.$MercuryTimestampTracker3=0;this.$MercuryTimestampTracker2=c('MercuryDispatcher').getForFBID(this.$MercuryTimestampTracker1);this.$MercuryTimestampTracker2.subscribe('update-messages',this.$MercuryTimestampTracker4.bind(this));}h.prototype.$MercuryTimestampTracker4=function(j,k){if(!k.actions||!k.actions.length)return;if(k.payload_source===c('MercuryPayloadSource').CLIENT_SEND_MESSAGE||k.payload_source===c('MercuryPayloadSource').UNKNOWN)return;for(var l=0;l<k.actions.length;l++){var m=k.actions[l],n=m.action_type;if(n==c('MercuryActionType').USER_GENERATED_MESSAGE&&m.thread_id&&m.timestamp>this.$MercuryTimestampTracker3)this.$MercuryTimestampTracker3=m.timestamp;}};h.prototype.getLastUserMessageTimestamp=function(){return this.$MercuryTimestampTracker3;};var i=new (c('MercurySingletonProvider'))(h);f.exports=h;}),null);
__d('ChatTitleBarBlinker',['ChatActivity','DocumentTitle','JSLogger','MercuryThreadInformer','MercuryNotificationRenderer','PresenceState','MercuryTimestampTracker'],(function a(b,c,d,e,f,g){'use strict';var h=c('MercuryThreadInformer').get(),i=c('MercuryTimestampTracker').get(),j=c('JSLogger').create('chat_title'),k=null,l=0,m=false;function n(){if(k){k.stop();k=null;return true;}return false;}function o(u){var v=u||i.getLastUserMessageTimestamp();if(l<=v){l=v;if(n()||m)c('PresenceState').doSync();}}var p={blink:function u(v,w){if(!k&&l<w)c('MercuryNotificationRenderer').renderDocumentTitle(v,function(x){if(!k)k=c('DocumentTitle').blink(x);});},stopBlinking:function u(){o();},blinkingElsewhere:function u(){m=true;}};function q(u){var v=c('PresenceState').verifyNumber(u.sb2);if(!v||v<=l)return null;return v;}function r(u){var v=u&&q(u);if(v){l=v;j.debug('load',l);n();m=false;}}function s(u){var v=q(u);if(!v){j.debug('store',l);u.sb2=l;m=false;}return u;}c('PresenceState').registerStateStorer(s);c('PresenceState').registerStateLoader(r);h.subscribe('thread-read-changed',function(u,v){var w=i.getLastUserMessageTimestamp(),x=0;for(var y in v)if(v[y].mark_as_read&&v[y].timestamp>=w&&v[y].timestamp>x)x=v[y].timestamp;x&&o(x);});c('ChatActivity').subscribe('activity',function(){return o();});var t=c('PresenceState').getInitial();if(t)l=q(t)||0;f.exports=p;}),null);
__d('SoundPlayer',['Map','URI','createArrayFromMixed'],(function a(b,c,d,e,f,g){'use strict';var h=new (c('Map'))();function i(l){var m=new (c('URI'))(l);return m.getDomain()?l:new (c('URI'))(window.location.href).setPath(m.getPath()).toString();}function j(l){var m=new (c('URI'))(l).getPath();if(/\.mp3$/.test(m))return 'audio/mpeg';if(/\.og[ga]$/.test(m))return 'audio/ogg';return '';}var k={preload:function l(m){for(var n=c('createArrayFromMixed')(m),o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var q;if(o){if(p>=n.length)break;q=n[p++];}else{p=n.next();if(p.done)break;q=p.value;}var r=q;if(h.has(r))return;var s=document.createElement('audio');if(!s||!s.canPlayType||!s.canPlayType(j(r)))continue;s.preload='auto';s.src=i(r);document.body&&document.body.appendChild(s);h.set(r,s);return;}},play:function l(m){var n=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];for(var o=c('createArrayFromMixed')(m),p=Array.isArray(o),q=0,o=p?o:o[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var r;if(p){if(q>=o.length)break;r=o[q++];}else{q=o.next();if(q.done)break;r=q.value;}var s=r;if(!h.has(s))k.preload(s);var t=h.get(s);if(!t)continue;if(n.loop)t.setAttribute('loop','');if(n.volume)t.volume=n.volume;t.play();return;}},pause:function l(m){for(var n=c('createArrayFromMixed')(m),o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var q;if(o){if(p>=n.length)break;q=n[p++];}else{p=n.next();if(p.done)break;q=p.value;}var r=q,s=h.get(r);if(s){s.pause();return;}}},stop:function l(m){for(var n=c('createArrayFromMixed')(m),o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var q;if(o){if(p>=n.length)break;q=n[p++];}else{p=n.next();if(p.done)break;q=p.value;}var r=q,s=h.get(r);if(s){s.pause();s.removeAttribute('src');s.src=i(r);return;}}}};f.exports=k;}),null);
__d('SoundSynchronizer',['SoundPlayer','WebStorage','createArrayFromMixed'],(function a(b,c,d,e,f,g){var h='fb_sounds_playing3';function i(){var m=c('WebStorage').getLocalStorage();if(m)try{var n=m[h];if(n){n=JSON.parse(n);if(Array.isArray(n))return n;}}catch(o){}return [];}function j(m){var n=c('WebStorage').getLocalStorage();if(n){var o=i();o.push(m);while(o.length>5)o.shift();try{n[h]=JSON.stringify(o);}catch(p){}}}function k(m){return i().some(function(n){return n===m;});}var l={play:function m(n,o,p){n=c('createArrayFromMixed')(n);o=o||n[0]+Math.floor(Date.now()/1000);if(k(o))return;c('SoundPlayer').play(n,{loop:!!p});j(o);},isSupported:function m(){return !!c('WebStorage').getLocalStorage();}};f.exports=l;}),null);
__d('SoundRPC',['Event','FBJSON','SoundSynchronizer'],(function a(b,c,d,e,f,g){function h(j,k,l){c('SoundSynchronizer').play(j,k,l);}var i={playLocal:h,playRemote:function j(k,l,m,n){var o={name:'SoundRPC',data:{paths:l,sync:m,loop:n}};k.postMessage(c('FBJSON').stringify(o),'*');},supportsRPC:function j(){return !!window.postMessage;},_listen:function j(){c('Event').listen(window,'message',function(k){if(!/\.facebook.com$/.test(k.origin))return;var l={};try{l=c('FBJSON').parse(k.data);}catch(m){}if(l.name==='SoundRPC')h(l.data.paths,l.data.sync,l.data.loop);});}};f.exports=i;}),null);
__d('Sound',['SoundInitialData','SoundPlayer','SoundRPC','SoundSynchronizer','URI','UserAgent_DEPRECATED','Visibility','isFacebookURI'],(function a(b,c,d,e,f,g){var h=null,i=false,j={init:function n(o){},play:function n(o,p,q){if(h){c('SoundRPC').playRemote(h.contentWindow,o,p,false);}else c('SoundRPC').playLocal(o,p,q);i=true;},hasPlayedSoundBefore:function n(){return i;},playOnlyIfImmediate:function n(o,p,q){if(!i&&c('Visibility').isHidden())return;this.play(o,p,q);},stop:function n(o){if(!h)c('SoundPlayer').stop(o);}},k=new (c('URI'))(location.href);if(k.getSubdomain()&&k.getSubdomain()!=='www')k.setSubdomain('www');var l=k.getDomain();function m(){if(c('UserAgent_DEPRECATED').ie()<9)return false;if(c('SoundInitialData').RPC_DISABLED)return false;return c('SoundSynchronizer').isSupported()&&c('SoundRPC').supportsRPC();}if(c('isFacebookURI')(k)&&location.host!==l&&m()){h=document.createElement('iframe');h.setAttribute('src','//'+l+'/sound_iframe.php');h.style.display='none';document.body.appendChild(h);}f.exports=j;}),null);
__d('MercuryBrowserAlerts',['ArbiterMixin','ChatActivity','ChatConfig','ChatOptions','ChatTitleBarBlinker','Event','Map','mercuryBlockedParticipantsRe','MercuryConfig','MercuryIDs','MercuryThreadInfo','MercuryThreads','MercuryViewer','MessagingTag','Sound','UserActivity'],(function a(b,c,d,e,f,g){'use strict';var h=c('mercuryBlockedParticipantsRe').get(),i=c('MercuryThreads').get(),j=3,k=600000,l=new (c('Map'))(),m=0;function n(){return !c('UserActivity').isOnTab()&&!c('UserActivity').hasBeenInactive();}function o(){l=new (c('Map'))();}function p(r){if(c('ChatOptions').getSetting('sound')&&!n())c('Sound').play([c('ChatConfig').get('sound.notif_ogg_url'),c('ChatConfig').get('sound.notif_mp3_url')],r,false);}var q=Object.assign({init:function r(){c('Event').listen(window,'focus',function(){o();clearInterval(m);});c('Event').listen(window,'blur',function(){m=setInterval(o,k);});},messageReceived:function r(s){if(s.author&&c('MercuryViewer').isViewer(s.author)||!s.is_unread||s.folder!=c('MessagingTag').INBOX&&s.folder!=c('MessagingTag').ARCHIVED)return;var t=s.thread_id,u=c('ChatActivity').isActive();if(u){var v=false;q.inform('before-alert',{threadID:t,cancelAlert:function w(){v=true;}});}i.getThreadMeta(t,function(w){var x=c('MercuryThreadInfo').isMuted(w),y=c('MercuryIDs').getUserIDFromParticipantID(c('MercuryViewer').getID());if(x)if(!c('MercuryThreadInfo').areMentionsMuted(w)){if(!s.profile_ranges||!s.profile_ranges.some||!s.profile_ranges.some(function(ba){return ba.id===y;}))return;}else return;if(h.isPresentInGroupThread(w))return;var z=s.timestamp;if(u){!v&&p(z);}else{c('ChatTitleBarBlinker').blink(t,z);var aa=l.get(t)||0;if(aa<j){l.set(t,aa+1);p(z);}}c('ChatTitleBarBlinker').blinkingElsewhere();});}},c('ArbiterMixin'));f.exports=q;}),null);
__d('ChatAppActionTypes',['keyMirror'],(function a(b,c,d,e,f,g){'use strict';f.exports=c('keyMirror')({INITIAL_DISPLAY_DONE:null,HIDE:null,LOAD:null,TTI:null,UNHIDE:null});}),null);
__d('ChatAppActions',['ChatDispatcher','ChatAppActionTypes'],(function a(b,c,d,e,f,g){'use strict';var h={tti:function i(){c('ChatDispatcher').dispatch({type:c('ChatAppActionTypes').TTI});},hide:function i(){c('ChatDispatcher').dispatch({type:c('ChatAppActionTypes').HIDE});},unhide:function i(){c('ChatDispatcher').dispatch({type:c('ChatAppActionTypes').UNHIDE});},setInitialDisplayDone:function i(){c('ChatDispatcher').dispatch({type:c('ChatAppActionTypes').INITIAL_DISPLAY_DONE});},load:function i(){c('ChatDispatcher').dispatch({type:c('ChatAppActionTypes').LOAD});}};f.exports=h;}),null);
__d('ChatAppStore',['ChatAppActionTypes','ChatDispatcher','FluxStore'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('ChatDispatcher'));this.$ChatAppStore2={initialDisplayDone:false,isHidden:false,isInitialized:false,isLoaded:false};this.$ChatAppStore1=babelHelpers['extends']({},this.$ChatAppStore2);}j.prototype.__onDispatch=function(k){var l=k.type;this.$ChatAppStore1=babelHelpers['extends']({},this.$ChatAppStore2);switch(l){case c('ChatAppActionTypes').INITIAL_DISPLAY_DONE:this.$ChatAppStore2.initialDisplayDone=true;this.__emitChange();break;case c('ChatAppActionTypes').HIDE:this.$ChatAppStore2.isHidden=true;this.__emitChange();break;case c('ChatAppActionTypes').UNHIDE:this.$ChatAppStore2.isHidden=false;this.__emitChange();break;case c('ChatAppActionTypes').TTI:this.$ChatAppStore2.isInitialized=this.$ChatAppStore2.isLoaded=true;this.__emitChange();break;case c('ChatAppActionTypes').LOAD:this.$ChatAppStore2.isLoaded=true;this.__emitChange();break;}};j.prototype.getPreviousState=function(){return this.$ChatAppStore1;};j.prototype.getState=function(){return this.$ChatAppStore2;};f.exports=new j();}),null);
__d('MercuryTypeaheadDataSource',['CurrentUser','DataSource','MercuryConfig','MercuryParticipantTypes','MercuryTypeaheadConstants','OrderedFriendsList','ShortProfiles','WorkModeConfig'],(function a(b,c,d,e,f,g){var h,i,j=[],k={},l={},m={},n=false,o=false;h=babelHelpers.inherits(p,c('DataSource'));i=h&&h.prototype;function p(q){'use strict';q=q||{};q.kanaNormalization=true;i.constructor.call(this,q);}p.prototype.dirty=function(){'use strict';this.$MercuryTypeaheadDataSource1=j;this.localCache=l;this.queryCache=k;this.queryIDs=m;return this;};p.prototype.bootstrap=function(){'use strict';if(n||o)return false;o=true;c('ShortProfiles').fetchAll().then(function(){this.updateBootstrapData();o=false;n=true;}.bind(this),function(){}.bind(this));return true;};p.prototype.updateBootstrapData=function(){'use strict';var q=this.getCachedShortProfileIDs(),r=c('WorkModeConfig').is_work_user?c('MercuryParticipantTypes').FB4C:c('MercuryParticipantTypes').FRIEND,s=q.map(function(t){var u=c('ShortProfiles').getNow(t),v=t==c('CurrentUser').getID()?r:u.type,w=[u.additionalName,u.alternateName].concat(u.searchTokens||[]).join(' '),x=u.name,y=null;return {uid:t,index:c('OrderedFriendsList').getActiveRank(t),text:x,subtext:y,tokens:w,localized_text:u.name,additional_text:u.additionalName,photo:u.thumbSrc,render_type:v,type:c('MercuryTypeaheadConstants').USER_TYPE};});if(s.length)this.addEntries(s);};p.prototype.query=function(q,r,s,t){'use strict';var u=r||q.length===1;return i.query.call(this,q,u,s,t);};p.prototype.getQueryData=function(q,r){'use strict';return babelHelpers['extends']({},i.getQueryData.call(this,q,r));};p.prototype.setEntry=function(q,r){'use strict';this.$MercuryTypeaheadDataSource1[q]=r;};p.prototype.getEntry=function(q){'use strict';return this.$MercuryTypeaheadDataSource1[q]||null;};p.prototype.getCachedShortProfileIDs=function(){'use strict';var q=c('ShortProfiles').getCachedProfileIDs(),r=q.filter(function(s){var t=c('ShortProfiles').getNow(s);return s==c('CurrentUser').getID()||t.type===c('MercuryParticipantTypes').FRIEND||t.type===c('MercuryParticipantTypes').FB4C||t.type===c('MercuryParticipantTypes').PAGE&&c('MercuryConfig').LinkedAgents&&c('MercuryConfig').LinkedAgents.indexOf(s.toString())>-1;});return r;};p.prototype.isBootstrapped=function(){'use strict';return n;};p.prototype.isBootstrapping=function(){'use strict';return o;};p.prototype.processEntries=function(q,r){'use strict';q=q.map(function(s){if(s.index==null&&(s.render_type===c('MercuryParticipantTypes').FRIEND||s.render_type===c('MercuryParticipantTypes').FB4C))s.index=c('OrderedFriendsList').getActiveRank(s.uid);if(s.render_type===c('MercuryParticipantTypes').PAGE&&c('MercuryConfig').LinkedAgents&&c('MercuryConfig').LinkedAgents.indexOf(s.uid.toString())>-1)s.index=1;return s;});return i.processEntries.call(this,q);};p.prototype.mergeUids=function(q,r,s,t){'use strict';var u=r.sort(function(v,w){return this.getEntry(v).index-this.getEntry(w).index;}.bind(this));return i.mergeUids.call(this,q,u,s,t);};f.exports=p;}),null);
__d('ChatTabTypeaheadDataSource',['MercuryConfig','MercuryTypeaheadConstants','MercuryTypeaheadDataSource'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('MercuryTypeaheadDataSource'));i=h&&h.prototype;function j(k){'use strict';k=k||{};k.maxResults=c('MercuryTypeaheadConstants').COMPOSER_CHATTAB_MAX;i.constructor.call(this,k);this.$ChatTabTypeaheadDataSource1=true;}j.prototype.buildData=function(k){'use strict';var l=[],m=[],n=[],o=[],p=[],q=[];k.forEach(function(s){var t=i.getEntry.call(this,s);switch(t.render_type){case c('MercuryTypeaheadConstants').FRIEND_TYPE:l.push(s);break;case c('MercuryTypeaheadConstants').THREAD_TYPE:if(this.$ChatTabTypeaheadDataSource1)m.push(s);break;case c('MercuryTypeaheadConstants').NON_FRIEND_TYPE:n.push(s);break;case c('MercuryTypeaheadConstants').FB4C_TYPE:o.push(s);break;case c('MercuryTypeaheadConstants').PAGE_TYPE:if(this.$ChatTabTypeaheadDataSource1)if(c('MercuryConfig').LinkedAgents&&c('MercuryConfig').LinkedAgents.indexOf(s.toString())>-1){q.push(s);}else p.push(s);break;default:break;}}.bind(this),this);var r=q.concat(l,o,m,p,n);return i.buildData.call(this,r);};j.prototype.query=function(k,l,m,n){'use strict';return i.query.call(this,k,l,m,n);};j.prototype.respond=function(k,l,m){'use strict';return i.respond.call(this,k,l,m);};j.prototype.setShowThreads=function(k){'use strict';this.$ChatTabTypeaheadDataSource1=k;};f.exports=j;}),null);
__d('FantaCookieUtil',['FantaConst','MercuryIDs','MercuryThreads','WorkModeConfig'],(function a(b,c,d,e,f,g){'use strict';var h=c('MercuryThreads').get(),i={convertCookieData:function j(k,l){var m={tabs:[],focusedTabID:null,updatedTime:0},n=[],o=this._getCookieKeys();k=k||{};if(k[o.tabs])n=k[o.tabs];n.forEach(function(u){m.tabs.push({id:u.i,isMinimized:!u.r,openCounter:u.o,focusCounter:u.f});});if(l)for(var p=l.tabs.values(),q=Array.isArray(p),r=0,p=q?p:p[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var s;if(q){if(r>=p.length)break;s=p[r++];}else{r=p.next();if(r.done)break;s=r.value;}var t=s;if(h.isEmptyLocalThread(t.id))m.tabs.push({id:t.id,isMinimized:t.isMinimized,openCounter:t.openCounter,focusCounter:t.focusCounter});}m.focusedTabID=k[o.focusedTabID];m.updatedTime=k[o.updatedTime];return m;},createCookieData:function j(k,l){var m=[],n=this._getCookieKeys();for(var o=k.tabs.values(),p=Array.isArray(o),q=0,o=p?o:o[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var r;if(p){if(q>=o.length)break;r=o[q++];}else{q=o.next();if(q.done)break;r=q.value;}var s=r;if(!c('MercuryIDs').isLocalThread(s.id))m.push({i:s.id,r:s.isMinimized?undefined:1,o:s.openCounter,f:s.focusCounter});}l[n.tabs]=m;l[n.focusedTabID]=k.focusedTabID;l[n.updatedTime]=k.updatedTime;return l;},_getCookieKeys:function j(){var k=c('WorkModeConfig').is_work_user;return {tabs:k?c('FantaConst').cookieIDs.WORK_COOKIE_ID:c('FantaConst').cookieIDs.PERSONAL_COOKIE_ID,focusedTabID:k?c('FantaConst').cookieIDs.WORK_FOCUS_COOKIE_ID:c('FantaConst').cookieIDs.PERSONAL_FOCUS_COOKIE_ID,updatedTime:k?c('FantaConst').cookieIDs.WORK_TIME_COOKIE_ID:c('FantaConst').cookieIDs.PERSONAL_TIME_COOKIE_ID};}};f.exports=i;}),null);
__d('FantaMercuryThreadEventsBootloaded',['Bootloader','MercuryThreadInformer','MercuryThreads','MercuryViewer'],(function a(b,c,d,e,f,g){'use strict';var h=c('MercuryThreadInformer').get(),i=c('MercuryThreads').get(),j={onMessagesReceived:function k(l){h.subscribe('messages-received',function(m,n){var o,p=function r(s){var t,u=n[s],v=function x(y){var z=u[y];if(z.author!=c('MercuryViewer').getID()){if(!z.is_unread)return 'continue';i.getThreadMeta(s,function(aa){c('Bootloader').loadModules(["ChatTabPolicy"],function(ba){ba.messageIsAllowed(aa,z,function(){l(s,z);});},'FantaMercuryThreadEventsBootloaded');});}};for(var w=0;w<u.length;w++){var t=v(w);if(t==='continue')continue;}};for(var q in n)p(q);});}};f.exports=j;}),null);
__d('FantaMessageActions',['Bootloader','FantaDispatcher','MercuryConfig','ifRequired','keyMirror','emptyFunction'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirror')({CANCEL_FILE_UPLOAD:null,COMPOSER_TEXT_UPDATE:null,LINK_PREVIEW:null,LOADED_SHARE_DATA:null,LOADING_SHARE_DATA:null,PREPARE_FILES_FOR_SEND:null,RECEIVED_NEW_MESSAGE:null,REMOVE_SHARE_PREVIEW:null,SEND_GROUP_MESSAGE:null,SEND_HOT_LIKE:null,SEND_MESSAGE:null,SEND_PHOTO:null,SEND_STICKER:null,UPDATE_GROUP_NAME:null,UPLOAD_FILE_FAILED:null,UPLOADED_FILE:null});function i(){var l=document.createElement('form');l.action=c('MercuryConfig').upload_url;l.method='post';return l;}function j(l,m){var n=document.createElement('input');n.type='file';n.name='attachment[]';n.multiple=true;if(m)n.onchange=m;l.appendChild(n);return n;}var k={Types:h,prepareFilesForSend:function l(m,n){this.dispatchOrBootloadUploader(function(){c('FantaDispatcher').dispatch({type:h.PREPARE_FILES_FOR_SEND,tabID:m,files:n});});},openUploadFilePicker:function l(m){var n=i(),o=j(n,function(){k.prepareFilesForSend(m,this.files);});o.click();},uploadedFile:function l(m,n,o){this.dispatchOrBootloadUploader(function(){c('FantaDispatcher').dispatch({type:h.UPLOADED_FILE,tabID:m,uploadID:n,payload:o});});},uploadFileFailed:function l(m,n){this.dispatchOrBootloadUploader(function(){c('FantaDispatcher').dispatch({type:h.UPLOAD_FILE_FAILED,tabID:m,uploadID:n});});},cancelFileUpload:function l(m,n){this.dispatchOrBootloadUploader(function(){c('FantaDispatcher').dispatch({type:h.CANCEL_FILE_UPLOAD,tabID:m,uploadID:n});});},linkPreview:function l(m,n){this.dispatchOrBootloadSharePreview(function(){c('FantaDispatcher').dispatch({type:h.LINK_PREVIEW,tabID:m,uri:n});});},loadedShareData:function l(m,n){this.dispatchOrBootloadSharePreview(function(){c('FantaDispatcher').dispatch({type:h.LOADED_SHARE_DATA,tabID:m,attachmentData:n});});},loadingShareData:function l(m){this.dispatchOrBootloadSharePreview(function(){c('FantaDispatcher').dispatch({type:h.LOADING_SHARE_DATA,tabID:m});});},removeSharePreview:function l(m){this.dispatchOrBootloadSharePreview(function(){c('FantaDispatcher').dispatch({type:h.REMOVE_SHARE_PREVIEW,tabID:m});});},receivedNewMessage:function l(m,n){c('FantaDispatcher').dispatch({type:h.RECEIVED_NEW_MESSAGE,tabID:m,message:n});},updateGroupName:function l(m,n){this.dispatchOrBootloadSendMessages(function(){c('FantaDispatcher').dispatch({type:h.UPDATE_GROUP_NAME,threadID:m,newName:n});});},sendGroupMessage:function l(m,n){this.dispatchOrBootloadSendMessages(function(){c('FantaDispatcher').dispatch({type:h.SEND_GROUP_MESSAGE,threadID:m,onSendSuccess:n});});},sendMessage:function l(m,n,o){this.dispatchOrBootloadSendMessages(function(){c('FantaDispatcher').dispatch({type:h.SEND_MESSAGE,threadID:m,message:n,onSendSuccess:o});});},sendPhoto:function l(m,n,o){this.dispatchOrBootloadSendMessages(function(){c('FantaDispatcher').dispatch({type:h.SEND_PHOTO,onSendSuccess:o,photoData:n,threadID:m});});},sendHotLike:function l(m,n,o,p,q){this.dispatchOrBootloadSendMessages(function(){c('FantaDispatcher').dispatch({type:h.SEND_HOT_LIKE,emoji:n,onSendSuccess:q,size:o,source:p,threadID:m});});},sendSticker:function l(m,n,o){this.dispatchOrBootloadSendMessages(function(){c('FantaDispatcher').dispatch({type:h.SEND_STICKER,threadID:m,stickerID:n,onSendSuccess:o});});},composerTextUpdate:function l(m,n){if(c('MercuryConfig').FantaTabView){if(n.length>0)c('ifRequired')('FantaReducersSendMessages',c('emptyFunction'),function(){return this.dispatchOrBootloadSendMessages(c('emptyFunction'));}.bind(this));this.dispatchOrBootloadSharePreview(function(){c('FantaDispatcher').dispatch({type:h.COMPOSER_TEXT_UPDATE,threadID:m,message:n});});}else c('FantaDispatcher').dispatch({type:h.COMPOSER_TEXT_UPDATE,threadID:m,message:n});},dispatchOrBootloadSendMessages:function l(m){c('ifRequired')('FantaReducersSendMessages',function(){m();},function(){c('Bootloader').loadModules(["FantaAppStore","FantaReducersSendMessages"],function(n,o){n.addReducers(o);m();},'FantaMessageActions');});},dispatchOrBootloadUploader:function l(m){c('ifRequired')('FantaReducersFileUploader',function(){m();},function(){c('Bootloader').loadModules(["FantaAppStore","FantaReducersFileUploader"],function(n,o){n.addReducers(o);m();},'FantaMessageActions');});},dispatchOrBootloadSharePreview:function l(m){c('ifRequired')('FantaReducersSharePreview',function(){m();},function(){c('Bootloader').loadModules(["FantaAppStore","FantaReducersSharePreview"],function(n,o){n.addReducers(o);m();},'FantaMessageActions');});}};f.exports=k;}),null);
__d("isWebMessengerURI",[],(function a(b,c,d,e,f,g){function h(i){return /^(\/messages)/.test(i.getPath());}f.exports=h;}),null);
__d('FantaTabViewportManager',['Arbiter','DockTabsViewportCalculator','DockTabsViewportFantaTabUtils','FantaTabActions','immutable','ifRequired','isWebMessengerURI','setImmediate'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=c('DockTabsViewportCalculator').getInstance(i);if(!j)return;j.registerFantaTabCallbacks({fantaTabModelStateGetter:function k(){var l=c('immutable').Map({});c('ifRequired')('FantaAppStore',function(m){l=m.getState().tabGroup.tabs;});return l;},onAvailableWidthChanged:function k(l){c('setImmediate')(function(){c('FantaTabActions').setAllowedRaisedTabs(c('DockTabsViewportFantaTabUtils').getTabCountToFitWidth(l));});}});c('Arbiter').subscribe('FantaReducersDockCalculator/shouldRecalculate',function(){j.forceRecalculateChatTabs();});j.forceRecalculateFBDockWidth();c('Arbiter').subscribe('page_transition',function(k,l){if(c('isWebMessengerURI')(l.uri))c('setImmediate')(function(){return c('FantaTabActions').minimizeAllTabs();});});}f.exports={init:h};}),null);
__d('MercuryTimestamp',['fbt','MercuryTimePassed','formatDate'],(function a(b,c,d,e,f,g,h){var i=86400000,j=6*i,k={getFormatedTimestamp:function l(m){var n=m/1000;return k.getFormattedTimestampByBucket(n,this.getTimeBucket(m));},getAbsoluteTimestamp:function l(m){if(m==null){return null;}else{var n=k.getFormatedTimestamp(m);return n.absolute;}},getRelativeTimestamp:function l(m){var n=k.getFormatedTimestamp(m);return n.relative;},getFormattedTimestampByBucket:function l(m,n){switch(n){case c('MercuryTimePassed').TODAY:return {absolute:h._("Today"),relative:c('formatDate')(m,'g:ia')};case c('MercuryTimePassed').WEEK_AGO:return {absolute:c('formatDate')(m,'l'),relative:c('formatDate')(m,'D')};case c('MercuryTimePassed').CURRENT_YEAR:return {absolute:c('formatDate')(m,'F j'),relative:c('formatDate')(m,'M j')};default:return {absolute:c('formatDate')(m,'F j, Y'),relative:c('formatDate')(m,'n/j/y')};}},getTimeBucket:function l(m){var n=new Date(m),o=new Date(),p=new Date(o.getFullYear(),o.getMonth(),o.getDate());if(p<n){return c('MercuryTimePassed').TODAY;}else if(p-j<n){return c('MercuryTimePassed').WEEK_AGO;}else if(p.getFullYear()===n.getFullYear()){return c('MercuryTimePassed').CURRENT_YEAR;}else return c('MercuryTimePassed').OTHER_YEAR;},getPreciseTimestamp:function l(m){return c('formatDate')(new Date(m),k.getPreciseFormat(m));},getPreciseFormat:function l(m){var n=k.getTimeBucket(m);switch(n){case c('MercuryTimePassed').TODAY:return 'g:ia';case c('MercuryTimePassed').WEEK_AGO:return 'l g:ia';case c('MercuryTimePassed').CURRENT_YEAR:return 'F jS, g:ia';case c('MercuryTimePassed').OTHER_YEAR:default:return 'F j, Y g:i a';}}};f.exports=k;}),null);
__d('P2PActionConstants',[],(function a(b,c,d,e,f,g){'use strict';var h={CREDIT_CARDS_UPDATED:'credit_cards_updated',CREDIT_CARDS_UPDATED_ERROR:'credit_cards_updated_error',CHANNEL_EVENTS_ALLOWED:'channel_events_allowed',CHANNEL_EVENTS_IGNORED:'channel_events_ignored',CREDIT_CARD_SAVING:'credit_card_saving',CREDIT_CARD_ADDED:'credit_card_added',CREDIT_CARD_ADDED_ERROR:'credit_card_added_error',CREDIT_CARD_ADDED_ERROR_CLEARED:'credit_card_added_error_cleared',CREDIT_CARD_DELETED:'credit_card_deleted',CREDIT_CARD_DELETED_ERROR:'credit_card_deleted_error',CREDIT_CARD_UPDATED:'credit_card_updated',CREDIT_CARD_UPDATED_ERROR:'credit_card_updated_error',PRESET_CREDIT_CARD_UPDATED:'preset_credit_card_updated',PRESET_CREDIT_CARD_UPDATED_ERROR:'preset_credit_card_updated_error',CREDIT_CARD_VERIFIED:'credit_card_verified',CREDIT_CARD_VERIFIED_ERROR:'credit_card_verified_error',PAYMENT_METHODS_UPDATED:'payment_methods_updated',PAYMENT_METHODS_UPDATED_ERROR:'payment_methods_updated_error',TRANSFERS_UPDATED:'transfers_updated',TRANSFERS_UPDATED_ERROR:'transfers_updated_error',NUX_TRANSFERS_UPDATED:'nux_transfers_updated',TRANSFER_ADDED:'transfer_added',TRANSFER_ADDED_ERROR:'transfer_added_error',TRANSFER_UPDATED:'transfer_updated',TRANSFER_UPDATED_ERROR:'transfer_updated_error',TRANSFER_ACCEPTED:'transfer_accepted',TRANSFER_DECLINED:'transfer_declined',CHAT_SEND_VIEW_OPENED:'chat_send_view_opened',CHAT_SEND_VIEW_CLOSED:'chat_send_view_closed',BIN_NUMBER_VALIDATED:'bin_number_validated',BIN_NUMBER_VALIDATED_ERROR:'bin_number_validated_error',USER_ELIGIBILITY_UDPATED:'user_eligibility_updated',FRIENDS_LIST_UPDATED:'friends_list_updated',DIALOG_SHOWN:'dialog_shown',DIALOG_CLOSED:'dialog_closed',BANNER_STATES_UPDATED:'banner_states_updated',BANNER_DISMISSED:'banner_dismissed',BANNER_VIEWED:'banner_viewed',BANNER_COMPLETED:'banner_completed',MONEYPENNY_TRANSFER_CREATED:'moneypenny_transfer_created',MONEYPENNY_TRANSFER_CREATED_ERROR:'moneypenny_transfer_created_error',PLATFORM_CONTEXT_ADDED:'platform_context_added',PLATFORM_CONTEXT_ADDED_ERROR:'platform_context_added_error',PLATFORM_CONTEXT_SAVE_ERRORS_CLEARED:'platform_context_save_errors_cleared',PLATFORM_CONTEXT_BANNER_DISMISSED:'platform_context_banner_dismissed',PLATFORM_CONTEXT_PRODUCT_ITEM_SOLD:'platform_context_product_item_sold',PLATFORM_CONTEXT_CHANGED:'platform_context_changed',EXTENSIVE_TRANSFER_DETAILS_UPDATED:'extensive_transfer_details_updated',ADDRESS_SAVING:'address_saving',ADDRESSES_UPDATED:'addresses_updated',ADDRESS_ADDED:'address_added',ADDRESS_ADDED_ERROR:'address_added_error',ADDRESS_ADDED_ERROR_CLEARED:'address_added_error_cleared',CHECKOUT_CART_INITIATED:'checkout_cart_initiated',CHECKOUT_CART_CREATED:'checkout_cart_created',CHECKOUT_SHIPPING_OPTION_SELECTED:'checkout_shipping_option_selected',CHECKOUT_ADDRESS_SELECTED:'checkout_address_selected',CHECKOUT_CREDIT_CARD_SELECTED:'checkout_credit_card_selected',CHECKOUT_ADDRESS_FORM_TOGGLED:'checkout_address_form_toggled',CHECKOUT_CREDIT_CARD_FORM_TOGGLED:'checkout_credit_card_form_toggled',CHECKOUT_ADDRESS_EDIT_OPTIONS_TOGGLED:'checkout_address_options_toggled',CHECKOUT_CREDIT_CARD_EDIT_OPTIONS_TOGGLED:'checkout_credit_card_edit_options_toggled',CHECKOUT_PAYMENT_METHOD_EDIT_OPTIONS_TOGGLED:'checkout_payment_edit_options_toggled',CHECKOUT_PAYMENT_METHOD_SELECTED:'checkout_payment_method_selected',CHECKOUT_PAYMENT_METHOD_CONFIGURED:'checkout_payment_method_configured',CHECKOUT_PAYMENT_METHOD_CONFIRMED:'checkout_payment_method_confirmed',CHECKOUT_ADDRESS_FORM_VALIDATED:'checkout_address_form_validated',CHECKOUT_CREDIT_CARD_FORM_VALIDATED:'checkout_credit_card_form_validated',CHECKOUT_EDIT_COMPLETED:'checkout_completed',CHECKOUT_PROCESSING:'checkout_processing',CHECKOUT_BUYER_PROFILE_UPDATED:'checkout_buyer_profile_updated',CHECKOUT_MANUAL_PAYMENT_RECEIPT_UPDATED:'checkout_manual_payment_receipt_updated',PAYMENT_REQUEST_INITIATED:'payment_request_initiated',PAYMENT_REQUEST_INITIATED_COMPLETE:'payment_request_initiated_completed',PAYMENT_REQUEST_CREATED:'payment_request_created',PAYMENT_REQUEST_CREATED_ERROR:'payment_request_created_error',PAYMENT_REQUEST_UPDATED:'payment_request_updated',PAYMENT_REQUEST_DECLINE_INITIATED:'payment_request_decline_initiated',PAYMENT_REQUEST_DECLINED:'payment_request_declined',PAYMENT_REQUEST_DECLINE_ERROR:'payment_request_decline_error',PAYMENT_REQUESTS_FETCHED:'payment_requests_fetched',PAYMENT_REQUEST_CANCEL_INITIATED:'payment_request_cancel_initiated',PAYMENT_REQUEST_CANCELED:'payment_request_canceled',PAYMENT_REQUEST_CANCEL_ERROR:'payment_request_cancel_error'};f.exports=h;}),null);
__d('P2PDispatcher',['ExplicitRegistrationReactDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('ExplicitRegistrationReactDispatcher'));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.dispatch=this.dispatch.bind(this);}f.exports=new j({strict:false});}),null);
__d('P2PSendMoneyDialogStore',['P2PActionConstants','EventEmitter','Map','P2PDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=void 0,k=void 0;h=babelHelpers.inherits(l,c('EventEmitter'));i=h&&h.prototype;function l(){i.constructor.call(this);k=new (c('Map'))();j=c('P2PDispatcher').register(this.onEventDispatched.bind(this));}l.prototype.onEventDispatched=function(m){var n=m.data,o=m.type;switch(o){case c('P2PActionConstants').CHAT_SEND_VIEW_OPENED:this.handleChatSendViewOpened(n);this.emit('change');break;case c('P2PActionConstants').CHAT_SEND_VIEW_CLOSED:this.handleChatSendViewClosed(n);this.emit('change');break;}};l.prototype.getStateByThreadID=function(m){return k.get(m);};l.prototype.handleChatSendViewOpened=function(m){k.set(m.threadID,{amount:m.amount,groupSendRecipientUserIDs:m.groupSendRecipientUserIDs,groupSendReceiptDetails:m.groupSendReceiptDetails,groupThreadFBID:m.groupThreadFBID,onCompletion:m.onCompletion,openRequestTab:m.openRequestTab,memoText:m.memoText,platformData:m.platformData,referrer:m.referrer,paymentRequestID:m.paymentRequestID,sendMoneyDialogShown:true,sendMoneyNUXDismissed:m.sendMoneyNUXDismissed,useModal:m.useModal});};l.prototype.handleChatSendViewClosed=function(m){k.set(m.threadID,{amount:'',groupSendRecipientUserIDs:[],groupSendReceiptDetails:null,groupThreadFBID:'',onCompletion:null,openRequestTab:false,memoText:null,platformData:null,referrer:null,paymentRequestID:null,sendMoneyDialogShown:false,sendMoneyNUXDismissed:false,useModal:false});};l.prototype.isAnyChatSendViewOpen=function(){for(var m=k.values(),n=Array.isArray(m),o=0,m=n?m:m[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var p;if(n){if(o>=m.length)break;p=m[o++];}else{o=m.next();if(o.done)break;p=o.value;}var q=p;if(q.sendMoneyDialogShown)return true;}return false;};f.exports=new l();}),null);
__d('FantaTabsAppBase',['ChatAppActions','ChatAppStore','ChatPerfInstrumentation','CSS','JSLogger'],(function a(b,c,d,e,f,g){'use strict';h.prototype.init=function(i,j,k){if(this.isInitialized()){c('JSLogger').create('chat_app').error('repeated_init');return;}this.$FantaTabsAppBase1=i;this.tabsElem=j;var l=c('ChatAppStore').addListener(function(){var m=c('ChatAppStore').getPreviousState(),n=c('ChatAppStore').getState();if(m.initialDisplayDone===false&&n.initialDisplayDone===true){c('ChatPerfInstrumentation').logDisplayDone();l.remove();}});c('ChatPerfInstrumentation').init();this.$FantaTabsAppBase2(k);this.initializeFantaData();this.initializeFantaUI();this.$FantaTabsAppBase3();c('ChatAppActions').tti();c('ChatPerfInstrumentation').logTTI();};h.prototype.isInitialized=function(){return !!c('ChatAppStore').getState().isInitialized;};h.prototype.isHidden=function(){var i=c('ChatAppStore').getState();return !!(!i.isInitialized||i.isHidden);};h.prototype.hide=function(){if(this.isHidden())return;c('CSS').hide(this.$FantaTabsAppBase1);c('ChatAppActions').hide();};h.prototype.unhide=function(){var i=c('ChatAppStore').getState();if(i.isInitialized){if(i.isHidden){c('CSS').show(this.$FantaTabsAppBase1);e(['Dock'],function(j){j.resizeAllFlyouts();});c('ChatAppActions').unhide();}}else if(!i.isLoaded){e(['UIPagelet'],function(j){j.loadFromEndpoint('ChatTabsPagelet','ChatTabsPagelet');j.loadFromEndpoint('BuddylistPagelet','BuddylistPagelet');});c('ChatAppActions').load();}};h.prototype.initializeFantaData=function(){};h.prototype.initializeFantaUI=function(){};h.prototype.$FantaTabsAppBase2=function(i){e(['mercuryBlockedParticipantsRe','MercuryDelayedRoger','MercuryDeliveryReceipts','MercuryDeliveryState','MercuryParticipants','MercuryServerPayloadPreprocessor','MercuryThreads','MercuryUnreadState','MercuryUnseenState','MercurySyncEnvironment','P2PSendMoneyDialogStore','OmniMStore'],function(j,k,l,m,n,o,p,q,r,s,t,u){j.get();k.get();l.get();m.get();n;p.get();r.get();q.get();s.setUp();u.setUp();c('ChatPerfInstrumentation').logInitStores();o.get().handleUpdate(i);});};h.prototype.$FantaTabsAppBase3=function(){e(['HotLikeSound','ChatOptions'],function(i,j){i.setCheckSoundEnabledFunc(function(){return j.getSetting('sound');});c('ChatPerfInstrumentation').logInitSound();});};function h(){}f.exports=h;}),null);
__d('MessengerSpinner.react',['cx','fbt','ix','Image.react','React','joinClasses'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes,n=j("86853"),o=j("86857"),p=j("86854"),q=24,r=32;k=babelHelpers.inherits(s,c('React').PureComponent);l=k&&k.prototype;s.prototype.render=function(){return c('React').createElement(c('Image.react'),{'aria-label':i._("Loading..."),'aria-busy':true,className:c('joinClasses')(this.props.className,"_3u55 _3qh2"),height:this.props.size,src:this.$MessengerSpinner1(),width:this.props.size});};s.prototype.$MessengerSpinner1=function(){return this.props.size===q?this.props.color==='blue'?n:o:p;};function s(){k.apply(this,arguments);}s.propTypes={color:m.oneOf(['blue','grey']),size:m.oneOf([q,r])};s.defaultProps={color:'blue',size:q};s.Sizes={LARGE:r,MEDIUM:q};f.exports=s;}),null);
__d('FBRTCMessageHandler',['invariant','Bootloader','FBRTCMessageListener','FBRTCSupport'],(function a(b,c,d,e,f,g,h){var i=null,j=false,k=null,l={init:function o(){if(!j&&c('FBRTCSupport').isReceiveWebrtcSupported()){j=true;c('FBRTCMessageListener').init(false);c('FBRTCMessageListener').once('messageReceived',function(p){m();});c('FBRTCMessageListener').once('multiwayMessageReceived',function(p){n(p);});}},resetListener:function o(){i||h(0);c('FBRTCMessageListener').removeMessageHandler();c('FBRTCMessageListener').setMessageHandler(i.onMessageReceived,i);}};function m(){if(!i)c('Bootloader').loadModules(["FBRTCIncomingCallController","FBRTCIncomingCallDialog","FBRTCMissedVideoCallHandler","FBRTCUnsupportedBrowserMessage"],function(o,p,q,r){i=new o(p,r,new q());c('FBRTCMessageListener').setMessageHandler(i.onMessageReceived,i);},'FBRTCMessageHandler');}function n(o){if(!k)c('Bootloader').loadModules(["FBRTCGroupCallIncomingController","FBRTCGroupCallIncomingDialog"],function(p,q){k=new p(q);c('FBRTCMessageListener').setMultiwayMessageHandler(k.onMessageReceived,k);k.onMessageReceived(o);},'FBRTCMessageHandler');}f.exports=l;}),null);
__d('MercuryAudienceRestrictedTypeaheadDataSource',['CurrentUser','DataSource','MercuryParticipantTypes','MercuryTypeaheadConstants','OrderedFriendsList','ShortProfiles'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('DataSource'));i=h&&h.prototype;function j(k){'use strict';k=k||{};k.kanaNormalization=true;k.maxResults=c('MercuryTypeaheadConstants').COMPOSER_CHATTAB_MAX;k.minQueryLength=2;i.constructor.call(this,k);this.$MercuryAudienceRestrictedTypeaheadDataSource1=false;this.$MercuryAudienceRestrictedTypeaheadDataSource2=false;this.$MercuryAudienceRestrictedTypeaheadDataSource3={};this.$MercuryAudienceRestrictedTypeaheadDataSource4=true;this.queryCache={};this.localCache={};this.queryIDs={};}j.prototype.dirty=function(){'use strict';return this;};j.prototype.buildData=function(k){'use strict';return i.buildData.call(this,k);};j.prototype.query=function(k,l,m,n){'use strict';var o=l||k.length===1;return i.query.call(this,k,o,m,n);};j.prototype.getQueryData=function(k,l){'use strict';return babelHelpers['extends']({},i.getQueryData.call(this,k,l));};j.prototype.setEntry=function(k,l){'use strict';this.$MercuryAudienceRestrictedTypeaheadDataSource3[k]=l;};j.prototype.getEntry=function(k){'use strict';return this.$MercuryAudienceRestrictedTypeaheadDataSource3[k]||null;};j.prototype.getCachedShortProfileIDs=function(){'use strict';var k=c('ShortProfiles').getCachedProfileIDs(),l=k.filter(function(m){var n=c('ShortProfiles').getNow(m);return m==c('CurrentUser').getID()||n&&(n.type===c('MercuryParticipantTypes').FRIEND||n.type===c('MercuryParticipantTypes').FB4C);});return l;};j.prototype.isBootstrapped=function(){'use strict';return this.$MercuryAudienceRestrictedTypeaheadDataSource1;};j.prototype.isBootstrapping=function(){'use strict';return this.$MercuryAudienceRestrictedTypeaheadDataSource2;};j.prototype.processEntries=function(k,l){'use strict';k=k&&k.map(function(m){if(m.index==null&&(m.render_type===c('MercuryParticipantTypes').FRIEND||m.render_type===c('MercuryParticipantTypes').FB4C))m.index=c('OrderedFriendsList').getActiveRank(m.uid);return m;});return i.processEntries.call(this,k);};j.prototype.mergeUids=function(k,l,m,n){'use strict';var o=l.sort(function(p,q){var r=this.getEntry(p),s=this.getEntry(q);return r&&r.index&&s&&s.index?r.index-s.index:0;}.bind(this));return i.mergeUids.call(this,k,o,m,n);};j.prototype.setQueryData=function(k,l){'use strict';return i.setQueryData.call(this,k);};j.prototype.respond=function(k,l,m){'use strict';return i.respond.call(this,k,l,m);};j.prototype.setShowThreads=function(k){'use strict';this.$MercuryAudienceRestrictedTypeaheadDataSource4=k;};f.exports=j;}),null);
__d('NotificationJewelReminderLoader',['JSResource'],(function a(b,c,d,e,f,g){f.exports={init:function h(i){c('JSResource')('NotificationJewelReminder').__setRef('NotificationJewelReminderLoader').load().done(function(j){new j(i);});}};}),null);